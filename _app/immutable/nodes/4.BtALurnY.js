import{f as R,a as v,c as U,t as q}from"../chunks/DCvXmXlu.js";import{i as It}from"../chunks/6IICz2GY.js";import{o as xt,a as St}from"../chunks/CisEU1wO.js";import{h as et,f as Rt,aF as z,aG as $t,i as wt,o as f,n as y,l as t,j,k as I,P as k,g as D,w as x,t as C,aH as st}from"../chunks/CR1LdmZO.js";import{e as rt,s as L}from"../chunks/CJtA_M2M.js";import{i as S,s as Nt,a as at}from"../chunks/KBBR2veS.js";import{s as Tt,g as B}from"../chunks/CX550nDs.js";import{w as kt}from"../chunks/Bp1PtkwD.js";const ot=[...` 	
\r\fÂ \v\uFEFF`];function Dt(r,d,p){var s=""+r;if(p){for(var a in p)if(p[a])s=s?s+" "+a:a;else if(s.length)for(var i=a.length,e=0;(e=s.indexOf(a,e))>=0;){var l=e+i;(e===0||ot.includes(s[e-1]))&&(l===s.length||ot.includes(s[l]))?s=(e===0?"":s.substring(0,e))+s.substring(l+1):e=l}}return s===""?null:s}function Lt(r,d,p,s,a,i){var e=r.__className;if(et||e!==p||e===void 0){var l=Dt(p,s,i);(!et||l!==r.getAttribute("class"))&&(l==null?r.removeAttribute("class"):r.className=l),r.__className=p}else if(i&&a!==i)for(var h in i){var o=!!i[h];(a==null||o!==!!a[h])&&r.classList.toggle(h,o)}return i}const Pt=()=>{const r=Tt;return{page:{subscribe:r.page.subscribe},navigating:{subscribe:r.navigating.subscribe},updated:r.updated}},At={subscribe(r){return Pt().page.subscribe(r)}};function J(r){return typeof r=="number"?r:typeof r=="string"?parseInt(r,10):0}function Wt(r){const d=[],p=s=>{const a=s.sets||1,i=J(s.rest);for(let e=0;e<a;e++)d.push({name:s.name,type:s.type,amount:s.type==="time"?J(s.amount):s.amount,notes:s.notes}),i>0&&e<a-1&&d.push({name:"Rest",type:"time",amount:i,notes:`Rest after set ${e+1} of ${s.name}`})};if(r.exercises)for(const s of r.exercises)p(s);else if(r.rounds)for(let s=0;s<r.rounds.length;s++){const a=r.rounds[s],i=J(a.rest_after_round);for(let e=0;e<a.count;e++){for(const o of a.exercises)p(o);const l=e===a.count-1,h=s===r.rounds.length-1;i>0&&(!l||!h)&&d.push({name:"Round Rest",type:"time",amount:i,notes:`Rest after round ${e+1}`})}}return d}var Ct=R('<p class="svelte-thejo2">Loading workout...</p>'),Gt=R('<h1 class="workout-complete svelte-thejo2">Workout Complete! ðŸŽ‰</h1> <button class="main-control svelte-thejo2">Go Home</button>',1),Ht=R('<p class="svelte-thejo2"> </p>'),Vt=R('<div class="timer-display svelte-thejo2"> </div>'),Et=R('<div class="reps-display svelte-thejo2"> </div>'),Ft=R('<h2 class="svelte-thejo2"> </h2> <h1 class="svelte-thejo2"> </h1> <!> <!> <button><!></button>',1),Mt=R('<div class="container svelte-thejo2"><!></div>');function Xt(r,d){Rt(d,!1);const p=()=>at(At,"$page",a),s=()=>at(kt,"$workouts",a),[a,i]=Nt(),e=y(),l=y(),h=y();let o=y([]),$=y(0),m=y(0),P,_=y(!0);xt(()=>{const c=p().params.slug;if(!c){B("/");return}const g=decodeURIComponent(c),A=s().find(H=>H.name===g);A?(f(o,Wt(A)),t(o).length>0&&t(o)[0].type==="time"&&f(m,t(o)[0].amount)):B("/")});function K(){f(_,!1),t(m)<=0&&t(e).type==="time"&&f(m,t(e).amount),P=setInterval(()=>{st(m,-1),t(m)<=0&&Q()},1e3)}function Q(){clearInterval(P);const c=t($)+1;if(c<t(o).length){f($,c);const g=t(o)[c];g.type==="time"?(f(m,g.amount),K()):(f(_,!0),f(m,0))}else st($),f(_,!0),f(m,0)}function nt(){if(t(e)){if(t(e).type==="reps"){Q();return}t(_)?K():(f(_,!0),clearInterval(P))}}St(()=>{clearInterval(P)}),z(()=>(t(o),t($)),()=>{f(e,t(o)[t($)])}),z(()=>(t(e),t(o)),()=>{f(l,t(e)===void 0&&t(o).length>0)}),z(()=>(t(m),t(e)),()=>{f(h,t(m)>0?t(m):t(e)?.type==="time"?t(e).amount:0)}),$t(),It();var G=Mt(),it=j(G);{var ut=c=>{var g=Ct();v(c,g)},lt=c=>{var g=U(),A=k(g);{var H=w=>{var T=Gt(),V=D(k(T),2);rt("click",V,()=>B("/")),v(w,T)},ft=w=>{var T=U(),V=k(T);{var ct=E=>{var X=Ft(),F=k(X),vt=j(F);I(F);var M=D(F,2),pt=j(M,!0);I(M);var Y=D(M,2);{var mt=n=>{var u=Ht(),b=j(u,!0);I(u),C(()=>L(b,(t(e),x(()=>t(e).notes)))),v(n,u)};S(Y,n=>{t(e),x(()=>t(e).notes)&&n(mt)})}var Z=D(Y,2);{var dt=n=>{var u=Vt(),b=j(u);I(u),C(()=>L(b,`${t(h)??""}s`)),v(n,u)},gt=n=>{var u=Et(),b=j(u);I(u),C(()=>L(b,`${t(e),x(()=>t(e).amount)??""} reps`)),v(n,u)};S(Z,n=>{t(e),x(()=>t(e).type==="time")?n(dt):n(gt,!1)})}var W=D(Z,2);let tt;var ht=j(W);{var _t=n=>{var u=q("Next");v(n,u)},bt=n=>{var u=U(),b=k(u);{var yt=N=>{var O=q("Start");v(N,O)},jt=N=>{var O=q("Pause");v(N,O)};S(b,N=>{t(_)?N(yt):N(jt,!1)},!0)}v(n,u)};S(ht,n=>{t(e),x(()=>t(e).type==="reps")?n(_t):n(bt,!1)})}I(W),C(()=>{L(vt,`Step ${t($)+1} of ${t(o),x(()=>t(o).length)??""}`),L(pt,(t(e),x(()=>t(e).name))),tt=Lt(W,1,"main-control svelte-thejo2",null,tt,{pause:t(e).type==="time"&&!t(_)})}),rt("click",W,nt),v(E,X)};S(V,E=>{t(e)&&E(ct)},!0)}v(w,T)};S(A,w=>{t(l)?w(H):w(ft,!1)},!0)}v(c,g)};S(it,c=>{!t(e)&&!t(l)?c(ut):c(lt,!1)})}I(G),v(r,G),wt(),i()}export{Xt as component};
